console.log("rheloo0i0 ");
// var expectedWords;

const sentencesArrayMarathi = [
  "आजच्या आधूनिक युगात शिक्षणाचे महत्त्व भरपूर आहे. असे म्हटले जाते की. “जे युद्ध तलवारीने जिंकले जात नाही ते पेनाच्या श्‍क्तीने जिंकू शकताे“. आणि ही गाेष्ट अतिशय सत्य देखील आहे. कारण पेन पकडता येणे हेच मूळात साक्षरतेचे प्रमाण आहे. साक्षरतेचा अर्थ देशातील अशिक्षित लाेकांना शिक्षित करून वाचन व लेखन करण्यायाेग्य बनवणे हाेय. दुसऱ्‍या शब्दात सांगायचे झाले तर साक्षर असणे म्हणजे वाचन व लेखन करण्याची याेग्यता प्राप्त करणे हाेय. भारतात राष्ट्रीय साक्षरता मिशन अनुसार जर एखादा व्यक्ती आपले नाव लिहिणे व वाचण्या याेग्य असेल तर ताे साक्षर आहे. वर्तमान काळात शिक्षणचे महत्त्व भरपूर आहे. शिक्षण ही जीवनातील एक आवश्‍यक बाब आहे. याशिवाय अशिक्षित लाेकही आपल्याच समाजाच भाग आहेत. आणि त्यांना साक्षर करणे आपले कर्तव्य आहे. कारण जर एखद्या देशाचा प्रत्येक नागरिक साक्षर असेल तरच त्या देशाची प्रगती हाेईल. साक्षरतेचा संबंध देशाच्या सामाजिक व आर्थिक विकासाशी आहे. शिक्षणाशिवाय व्यक्तीचे जीवन पशूप्रमाणे हाेते. भारताला गावांचा देश म्हटले जाते. कारण आपल्या दशातील बहुसंख्य लाेक खेड्या गावात राहतात. या लाेकांमध्ये शेतकरी मजूर इत्यादींची संख्या अधिक आहे आणि सर्वात जास्त अशिक्षित व निरक्षर हेच लाेक आहेत. अश्‍या काळात अशिक्षिततेचा फायदा घेऊन अनेक चतुर व्यापरी, कुटील नेते आणि सरकारी अधिकारी यांचा आपल्या कार्यासाठी लाभ करून घेतात. निरक्षर लाेक शासनाकडून आलेल्या येजना व्यवस्थित समजू शकत नाही व यामुळे त्यांना सरकारी याेजनांचा लाभ मिळत नाही, साक्षर लाेक शासनाच्या याेग्य निर्णयांमध्ये सहयाेग करतात आणि चुकीच्या निर्णयांचा विरांध देखील करतात. साक्षर व्यक्तीला आपलया मताची किंमत माहिती असते. म्हणून ताे याेग्य नेत्यालाच आपले मत देताे. आपला देश कृषिप्रधान देश आहे. जर या देशातील शेतकरी साक्षर असेल तरच ताे शेतीमधून अधिक उत्पन्न प्राप्त करू शकताे. शिकेले शेतकरी वैज्ञानिक पद्धतीने शेती करतात. ते नवनवीन आधुनिक उपकरणांचा उपयाेग करून शेतातून अधिक धान्य उत्पन्न करातात. आणि आपल्या गावाचा व देशाचा विकास करतात. ज्याप्रमाणे पुरुषांसाठी शिक्षणाचे महत्त्व आहे त्याच पद्धतीने स्त्री शिक्षण देखील अत्यावश्‍यक आहे. एक शिक्षित महिला आपली मुले व कुटुंबातील इतर सदस्यांना शिक्षित करते. यासाेबतच नाेकरी व व्यवसाय करून कुटुंबाला आर्थिक सहयाेग पाेहचवते.",
  "मी एक नदी आहे. नदी हा शब्द तुम्हाला तर परिचितच असेल. पण तरीही मी आज तुम्हाला माझा परिचय देणार आहे मी काेण आहे. कुठून आले आहे. माझे अस्तित्व काय आहे. भारतासह मला जगभरात वेगवेगळ्या नावांनी ओळखले जाते. जसे सरिता, जीवनदायिनी रिव्हर इत्यादी. स्वभावत: मी खूप चंचल आहे परंतु कधीकधी शांत देखील हाेऊन जाते. खळखळ करत मी वाहत राहते. सतत न थांबता, न अडकता मी वाहते. माझा जन्म पर्वतांमध्ये झाला हाेता, तेथून झऱ्‍यांच्या मदतीने मी जंगल आणि गावांमधून वाहत वाहत पुढे समुद्राला हाेता, पुढे समुद्राला जाऊन मिळते. माझ्या प्रवाह कधी कमी तर कधी जास्त हाेताे. माझा आकार स्थानानुसार कधी लहान तर कधी माेठा हाेत असताे. माझ्या मार्गात खूप अडचणी येतात, कधी दगड गाेटे तर कधी माेठ माेठ पर्वत पण मी कधीही थांबत नाही. माझा मार्ग मी स्वत: तयार करून वाहत राहते. मनुष्य अनेक प्रकारांनी माझ्याशी जुळलेला आहे. तुम्ही असेही म्हणू शकतात की मी मनुष्यासाठी खूप उपयुक्त आहे. मनुष्याला अनेक पद्धतीने जीवन जगण्यासाठी मी मदत करते. माझ्या पाण्यात अनेक जलचर जीवजंतू राहतात मनुष्य त्यांना पकडून खाताे. अश्‍या पद्धतीने मी मनुष्याची अन्नाची भूक भागवते. माझ्यामुळे भूतलावावरील सर्व घरांमध्ये पाण्याची व्यवस्था हाेते. मनुष्याला दैनंदिन जीवन जगण्यासाठी पणी हे अतिशय उपयुक्त आहे. मी पर्यावरणाचे संतुलन राखण्यात मदत करते. माझ्या पाण्याच्या मदतीने मनुष्य वीन तयार करताे आणि याच विजेच्या मदतीने अनेक उपकरणे कार्य करातात. शेतकरी माझे पाणी शेतात पिकांसाठी वापरताे, ज्यामुळे शेतातील पिके लहरायला लागतात. जंगलातून वाहताना मी जंगली पशु पक्ष्यांची तहान भागवते व यासाेबतच जंगलातील झाडांना पाणी पुरवठा करते. माझ्या बद्दल सांगायचे झाले तर मलाही भावना आहेत, मला देखील आनंद व दु:ख हाेते आणि मनुष्य मला अतिशय लाेभी जाणवताे. आपले स्वार्थ पूर्ण करण्यासाठी ताे काहीही करू शकताे. मनुष्या द्वारे मला देवीच्या रूपात पूजले जाते, लाेक त्यांच्या इच्छा पूर्ण करण्यासाठी मला प्रार्थना करतात, उपवास ठेवतात, फुले चढवतात. आणि मग दुसरी कडे तेच माझ्या पाण्यात कचरा व घाण टाकतात, मला प्रदूषित करतात. आता तुम्हीच सांगा की काेणी देवीला प्रदूषित करत का माझी इच्छा फक्त एवढीच आहे की जर मनुष्य मला देवी मानत असेल तर त्याने मला प्रदूषित कारायला नकाे.",
  "मी वाचलेल्या व मला सर्वाधिक प्रिय असणाऱ्‍या पुस्तकाचे नाव अग्निपंख आहे. हे पुस्तक भारताचे भूतपूर्व राष्ट्रपती डाॅक्टर एपीजे अब्दुल कलाम यांनी लिहिले आहे. अग्निपंख ही एपीजे अब्दुल कलाम यांची आत्मकथा आहे. या पुस्तकात अब्दुल कलाम यांच्या बालपणापासून तर राष्ट्रपति पदापर्यंतचा संपूर्ण प्रवास रचण्यात आला आहे. डाॅक्टर अब्दुल कलाम भारताच्या यशस्वी शास्त्रज्ञापैकी एक आहेत. त्यांनी इंडियन स्पेस रिसर्च ऑर्गनायझेशन मध्ये महत्त्वाचे याेगदान दिले. भारताची सैन्य क्षमता वाढविण्यासाठी त्यांनी अनुचाचणी घेतली म्हणूनच त्यांना मिसाईल मेन म्हणूनही संबाेधले जाते. २००२ सालापर्यंत ते अत्यंत लाेकपि्रय झाले हाेते. म्हणूनच त्यांना भारताच्या राष्ट्रपतीपदासाठी निवडण्यात आले. अग्निपंख या पुस्तकात अब्दुल कलाम यांनी यांचे बालपणचे जीवन ते राष्ट्रपती पदासाठी करण्यात आलेली निवड पर्यंतचा संपूर्ण जीवन परिचय रेखाटला आहे. या चारित्र्याची सुरुवत एका लहान मुलापासून हाेते जाे नंतर इस्त्राे चा प्रसिद्ध शास्त्रज्ञ आणि भारताचे राष्ट्रपती बनताे. मला या पुस्तकातील सुरुवातीचे धडे जास्तीत आवडले कारण या धड्यांमध्ये भारताच्या १९३०-१९५० या कालखंडातील परिस्थिचे चित्रण करण्यात आले आहे. अब्दुल कलाम यांचा जन्म धार्मिक नगरी रामेश्‍वरम मधील एका मुस्लिम कुटुंबात झाला. भारताच्या विभाजनापूर्वी असलेली देशातील धार्मिक एकता आणि एकत्मतेचे वर्णन अब्दुल कलाम यांनी पहिल्या दाेन धड्यांमध्ये केले आहे. अब्दुल कलमा यांनी आपल्या पुस्तकात लिहिले आहे की लहान असताना त्यांचे स्वप्न पायलट बनण्याचे हाेते. परंतु पायलट साठी असलेली इंटरव्यू परीक्षा ते अनुत्तीर्ण झाले. परंतु निराश न हाेता त्यांनी दुसऱ्‍या क्षेत्रात आले करियर सुरू केले. पुस्तकात सांगितल्याप्रमाण्र कलाम यांनी सुरवातीला विमान बनवण्याचे क्षेत्रात कार्य केले. नंतर ते भारतीय अंतराक्ष संस्था इस्त्राे कडे वळले. अग्निपंख पुस्तकात अब्दुल कलाम यांनी यशस्वीपणे पूर्ण केलेले सॅटॅलाइटआणि मिसाइल कार्यक्रमांची माहिती देण्यात आली आहे. अग्नी, आकाश, पृथ्वी, त्रिशूल, नाग या घराेघरी पाेहाेचलेल्या नावांच्या क्षेपणास्त्रांची जडणघडणही फार सुंदरपणे वाचकांना सांगितलेली आहे. हे पुस्तक केवळ डाॅ. अब्दुल कलाम यांचे आत्मचरित्र नसून स्वतंत्र भारताच्या तंत्रज्ञानविषयक लढाईचे एक स्पंदन आहे.जागतिक शस्त्रस्पर्धेच्या राजकारणाची आणि विज्ञानाची ती काहणी आहे. तसेच स्वयंपूर्ण हाेण्यासाठी आपल्या देशाने केलेल्या संघर्षाचे ते मनाेहारी खंडकाव्यही आहे.",
];

const sentencesArrayEnglish = [
  "Walking is the safest and most convenient activity for weight control, ailment free, healthy, and all- round physical fitness. But walking also gives one a lot of pleasure and satisfaction. Walking is about success, growth, determination, and deduction.Did you know that walking uses large portions of muscle groups in your legs and arms in a steady. rhythmic pattern? No wonder it is recommended not just fitness but for total health too. It is the cornerstone of a total approach to personal fitness. Walking is one exercise that offers multiple advantages at a minimum cost and with the least effort.Walking increases the flow of oxygen to all tissues and cells. It increases the high-density lipoproteins which protect the heart and blood vessels from fatty deposits. It protects and strengthens the heart muscles whereby it can pump more blood with fewer beats..Walking increases the ability of the body to handle stress successfully, making you less prone to blood pressure and heart disease. It decreases the sugar fats, known as triglycerides, thus preventing them are being deposited on the lining of the arteries.",

  "The great advantage of early rising is the good start it gives us in our day's work. The early riser has done a large amount of hard work before other men have got out of bed. In the early morning the mind is fresh, and there are few sounds or other distractions, so that work done at that time is generally well done. In many cases the early riser also finds time to take some exercise in the fresh morning air, and this exercise supplies him a fund of energy that will lost until the evening. By beginning so early, he knows that he has plenty of time to do thoroughly all the work he can be expected to do, and is not tempted to hurry over any part of it. All his work being finished in good time, he has a long interval of rest in the evening before the timely hour when he goes to bed. He gets to sleep several hours before midnight, at the time when sleep is most refreshing and after a sound night's rest, rises early next morning in good health and spirits for the labors of a new day. It is very plain that such a life as this is far more conducive to health than that of the man who shortens his waking hours by rising late, and so can afford in the course of the day little leisure for necessary rest. Any one who lies in bed late, must, if he wishes to do a full day's work, go on working to a correspondingly late hour, and deny himself the hour or two of evening exercise that he ought to take for the benefit of his health. But in spite of all his efforts, he will probably produce as good results as the early riser, because he misses the best working hours of the day. It may be objected to this that some find the perfect quiet of midnight by far the best time for working. This is no doubt true in certain cases. Several great thinkers have found by experience that their intellect is clearest, and they can write best, when they burn the midnight oil. But even in such cases the practice of working late at night cannot be commended. Few men, if any, can exert the full power of their intellect at the time when nature prescribes sleep, without ruining their health thereby. ",

  "A difference in opinions, values, attitudes and lifestyle among people of different ages is called 'generation gap'. Due to these differences, people belonging to different generations find themselves unable to relate to each other. This communication gap between successive generations is not a new phenomenon. The fight between the old and the young is not new and has been bound in the culture of every nation of the world. Parents and children across the world have been facing this problem. Due to fast-paced modern lifestyles, parents and children hardly find time together. The children, thus unable to express their thoughts and ideas to their parents, turn to friends for advice who are as inexperienced as they are. In the era of globalization and liberalization, the gap between the young the old reached its zenith.Today's children are born into a competitive world and have a struggle to get every thing. Many a time their true potential gets overshadowed in the rat race. Parents- burdened by the expectations of the society- end up forcing certain subjects and careers and lives that their parents have chosen for them, children are left lost and confused. Parents, on the other hand, feel that in this rapidly changing society where everyone is so self-centered, it is their duty to protect their children. Parents tend to feel that their children require guidance. This cannot be denied. But their constant monitoring makes children feel oppressed and they tend to turn rebellious. Thus, generation gap is destroying the basic human relationship and is obviously a threat to the social stability of family relations. It is essential for parents to talk to their children and treat them as individuals. To be forever treated as child can be irritating and sometimes even humiliating. Children, in turn, must reciprocate with due respect and attention. Matters such as career, lifestyle and sensitive issues like freedom of choice of friends must be dealt with carefully and with maturity. Love and understanding are the best antidotes to this ever-widening generation gap. Only then will children look up to their parents and parents will not be burdened with their guilt of not being there for their children in their hour of need. In this way generation gap can at least be narrowed, if not completely filled.",

  "Travelling is an important part of human life. It gives you a break form your busy life and makes you feel renewed for a new start. It takes away all you stress and improves your health and mind. We can explore the serene nature around us and meet new people. This makes us feel livelier. For so long I wanted to take my parents out for a trip. Since last time I planned to visit Goa to take a break and refresh myself. It was such a thrilling trip. I enjoyed all three days spent in Goa. The overall trip was very good. I had so much fun with my family. The sun and the sky were clear. I expected rain but there was no sign of it. I prefer to travel in the summer season. Rains can drench area pretty quickly. It also ruins your plans and spoils the whole trip. I have seen many tourists in Goa. People come from so far to spend some good time here. It is nice to meet new people. I really like Goa for many reasons. I like beaches. It was my dream place as I have heard many things about this place. So, I fulfilled my dream and reached Goa to enjoy my life and get away from the daily hustles. It is no new news that travel is good for your body but there are many researchers which suggest that exploring a new place can do wonders for your mental and emotional health as well. A trip enhances your mood. It gives you a reason to smile. I believe that a person should go on a trip once a month. I am always busy when I travel it is taking photos or just exploring a place on foot. I know I am the calmest and most relaxed when I travel. Also, the lessons you learn along the way make you more aware and open to new things. I Love going to places with different cultures because it forces you to think about your own. When you explore new places, you give yourself a chance of fresh start. It makes you feel calm. When you are going through a tough time in your life it gives you more clarity. I think people in general are not meant to be tied down to just one place their entire lives.",
];

// ALL ELEMENTS TO BE USED
const result = document.getElementById("result");
const UserInput = document.getElementById("UserInput");
const backspaceSpan = document.getElementById("backspace");
const keyStrokeSpan = document.getElementById("keystroke");
const contentLengthSpan = document.getElementById("contLength");
const mistakesSpan = document.getElementById("mistakes");
const typedWordCountSpan = document.getElementById("typedWordCount");
const pendingWordSpan = document.getElementById("pendingWordCount");
const accuracySpan = document.getElementById("accuracyCount");
var correct_word = 0;
var accuracyCount = 0;
var typedWordCount = 0;
var remainingWords = 0;
var total_words = 0;
var secondsRemaining;
var intervalId;
var type_language = "";
var EnglishTextReal = "";
var back_space_count = 0;
var mistakeCount = 0;

const splitWords = (words) => {
  let resultArray = [];

  words.forEach((word) => {
    if (word.endsWith(".")) {
      resultArray.push(word.slice(0, -1), ".");
    } else if (word.endsWith(",")) {
      resultArray.push(word.slice(0, -1), ",");
    } else if (word.endsWith(")")) {
      resultArray.push(word.slice(0, -1), ")");
    } else if (word.endsWith("-")) {
      resultArray.push(word.slice(0, -1), "-");
    } else {
      var trimmedStr = word.trim();
      resultArray.push(trimmedStr);
    }
  });

  return resultArray;
};

function getc(lang, speed) {
  console.log(lang + " , " + speed);
  type_language = lang;
  renderNewQuote(lang);
}

var key_stroke_count = 0;

// let startTime;
// let timerInterval;
// const totalTimeInSeconds = 600; // 10 minutes

// function startTimer() {
//   if(test_type === 'speed'){
//     // Check if the timer is already running
//     if (!startTime) {
//       startTime = new Date().getTime();
//       timerInterval = setInterval(updateTimer, 1000);
//     }
//   }else{
//     // CODE FOR PRACTICE TEST
//   }

// }
// function stopTimer() {
//   if (startTime) {
//     clearInterval(timerInterval);
//     startTime = null; // Reset startTime to indicate the timer has stopped
//   }
// }
// function updateTimer() {
//   const currentTime = new Date().getTime();
//   const elapsedTimeInSeconds = Math.floor((currentTime - startTime) / 1000);
//   const remainingTimeInSeconds = totalTimeInSeconds - elapsedTimeInSeconds;

//   if (remainingTimeInSeconds <= 0) {
//     // Timer reached 0, stop the timer
//     clearInterval(timerInterval);
//     document.getElementById("countdown").textContent = "Time: 0:00";
//     alert("Time's up! Submit your test.");
//     handle_submit();
//     // Additional actions when the timer reaches 0
//     // You can customize this part based on your requirements
//   } else {
//     // Format minutes and seconds
//     const minutes = Math.floor(remainingTimeInSeconds / 60);
//     const seconds = remainingTimeInSeconds % 60;

//     document.getElementById("countdown").textContent = `${minutes}:${
//       seconds < 10 ? "0" : ""
//     }${seconds}`;
//   }
// }

let timerInterval = null;
let totalSeconds = 0; // Use this for count-up
let startTime; // Use this for countdown
const totalTimeInSeconds = 600; // 10 minutes for countdown


function startTimer() {
  if (test_type === "speed") {
    // Speed Test: Countdown timer
    if (!timerInterval) {
      let timeRemaining = totalTimeInSeconds;
      timerInterval = setInterval(() => {
        timeRemaining--;
        document.getElementById("countdown").textContent =
          formatTime(timeRemaining);
        if (timeRemaining <= 0) {
          stopTimer();
          alert("Time's up!");
        }
      }, 1000);
    }
  } else {
    // Practice Test: Count-up timer
    if (!timerInterval) {
      totalSeconds = 0; // Reset counter for count-up
      timerInterval = setInterval(() => {
        totalSeconds++;
        document.getElementById("countdown").textContent =
          formatTime(totalSeconds);
      }, 1000);
    }
  }
}

function stopTimer() {
  clearInterval(timerInterval);
  timerInterval = null;
}

function formatTime(seconds) {
  const hours = Math.floor(seconds / 3600);
  const minutes = Math.floor((seconds % 3600) / 60);
  const secondsRemain = seconds % 60;

  return [hours, minutes, secondsRemain]
    .map((val) => (val < 10 ? "0" + val : val))
    .join(":");
}

var tempo = "";
var length_maintainer = 0
// main code FOR ENGLISH start here
UserInput.addEventListener("input", function (event) {
  startTimer();
  // console.log((UserInput.value).length);
  // to count keystorke
  key_stroke_count++;
  keyStrokeSpan.textContent = key_stroke_count;
  // console.log("key_stroke_count",key_stroke_count)

  //MAKE THE SELECTED PARA INTO ARRAY OF WORDS
  expectedWords = textToType.split(" ");
  // To count the length of para
  const lengthCount = expectedWords.length;

  // to count ramining word
  remainingWords = lengthCount - typedWordCount;
  // console.log("hogj",remainingWords)
  pendingWordSpan.innerText = remainingWords;

  // to count all words
  contentLengthSpan.textContent = lengthCount;
  total_words = lengthCount;

  // For Engkish language
  if (type_language === "english") {
    //MAKE USER INPUT INTO ARRAY OF WORDS
    const userWords = UserInput.value.split(" ");

    let feedback = "";

    if (event.inputType == "deleteContentBackward") {
      // To count backspace
      back_space_count = back_space_count + 1;
      backspaceSpan.textContent = back_space_count;
      key_stroke_count = Math.max(0, key_stroke_count - 2);
      keyStrokeSpan.textContent = key_stroke_count;
    }
  }

  //******/ For Marathi Language***************
  else {
    const text = UserInput.value;
    if (event.inputType == "deleteContentBackward") {
      // To count backspace
      back_space_count = back_space_count + 1;
      backspaceSpan.textContent = back_space_count;
      // key_stroke_count--;
      key_stroke_count = Math.max(0, key_stroke_count - 2);
      keyStrokeSpan.textContent = key_stroke_count;
      console.log(key_stroke_count);

      // to work backSpace in marathi input
      let difference = EnglishTextReal.length - 1;
      EnglishTextReal = EnglishTextReal.slice(0, difference);
    } else {
      EnglishTextReal += text.substring(text.length - 1);
    }

    var changed = convertToMarathi(UserInput.value);
    console.log("CHANGED KA LENGTH-> " + changed)
    
    // if(changed.length > length_maintainer){
        UserInput.value = changed;
    //     length_maintainer = changed.length
    // }
    // else{
    //     length_maintainer = changed.length;
    // }
    // console.log("CHANGES-> " + changed);
    // tempo += changed ;
    console.log("CHANGES-> " + changed);
    // UserInput.value = changed;

    //MAKE USER INPUT INTO ARRAY OF WORDS
    const userWords = changed.split(" ");
    console.log(userWords.length, "userWords.length");
    //   console.log("CONVERTED ARRAT-> " + userWords)
    let feedback = "";
  }

  // TO disabale more than one space
  UserInput.addEventListener("keydown", function (event) {
    if (event.key === " " && UserInput.value.slice(-1) === " ") {
      event.preventDefault();
      // typedWordCount = (UserInput.value.split(" ")).length;
      // console.log("tped", typedWordCount);
    }
    typedWordCount = UserInput.value.split(" ").length;
    typedWordCountSpan.innerText = typedWordCount;
    console.log("typed_words", typedWordCount);
  });
});

// userdefined function started
var innerLoopIndex = 0;
var location_string = "";

function compareWordsNew() {
  // INITIAISE ALL NEEDED FUNCTION

  // to disable input
  document.getElementById("UserInput").disabled = true;
  // SEARCH VALUE IN RANGE FUNCTION
  function value_in_range(arr, val_index) {
    console.log("SEARCH GREATER THAN-> " + val_index);
    var i = -1;
    for (let index = 0; index < arr.length; index++) {
      const element = arr[index];

      let firstIndex = expectedWords.indexOf(element);
      if (firstIndex != -1 && firstIndex > val_index) {
        i = firstIndex;
        console.log("FOUND AT-> " + firstIndex + " , " + element);
        break;
      }
    }

    return i;
  }
  function start_value_in_range(end, word) {
    console.log("SEARCH LARGEST BETWEEN 0-> " + " AND " + end);
    // var i = -1;
    var start_index = expectedWords.slice(0, end).lastIndexOf(word); //Find Index of repeated word in given range

    return start_index;
  }
  // INITIALISE ALL VARIABLES
  var actual_counter = 0;
  var latest_index = 0; //Latest Index found correct
  var sting = ""; //String of index of all correct words

  // GET TYPED VALUE AND MAKE A ARRAY OF IT
  var data = document.getElementById("UserInput").value;
  var data_array = data.split(" ");
  // const data_array = splitWords(data_arra);
  console.log(data_array);
  // GET EXPECTED WORDS ARRAY AND PROCESS IT
  // expectedWords = splitWords(expectedWords);

  // INITIATE A OBJECT TO KEEP TRACK OF REPETATING WORDS
  let found = new Object();

  // ACTUAL CODE STARTS
  for (let j = 0; j < data_array.length; j++) {
    var existing = Object.keys(found); //Check if Current Value is already eing found previously

    // IF EXISTS THEN FIND THE ARRAY FROM FOUND INDEX TO LATEST FOUND INDEX
    if (existing.includes(data_array[j])) {
      console.log(found);
      // var val = found[data_array[j]]; //Start Index to search from

      var val = start_value_in_range(latest_index, data_array[j]); //Start Index to search from
      if (val === -1) {
        val = found[data_array[j]];
      }
      console.log(
        "FINDING " +
          data_array[j] +
          " OF LOC " +
          j +
          " PREVIOUS LOCATION " +
          val
      );
      var end_index = value_in_range(data_array, latest_index); //Get End Inddex

      if (end_index === -1) {
        //If Finds Nothing then set end index as paragraph length
        end_index = expectedWords.length;
      }

      var val_no = parseInt(val) + 1;
      console.log("END INDEX-> " + end_index + " START INDEX-> " + val_no);
      var repeat_word = expectedWords
        .slice(val_no, end_index)
        .indexOf(data_array[j]); //Find Index of repeated word in given range

      for (var z = val_no; z < end_index; z++) {
        if (expectedWords[z] === data_array[j]) {
          // console.log("IF " + expectedWords[i] + " === " + data_array[j]);
          console.log("ADDING TO STING-> " + z);
          sting += z + " ";
          // found.expectedWords[i] = i;
          found[`${expectedWords[z]}`] = `${z}`;
          // console.log("ACTUAL -> " + actual_counter );
          break;
          // actual_counter++;
        }
      }
      actual_counter = latest_index;
    }
    // IF DOSENT EXIST IN FOUND OBJECT THEN SEARCH NORMALLY
    else {
      console.log(
        "NORMAL ELSE " + data_array[j] + " ACTUAL COUNTER- " + latest_index
      );
      actual_counter = latest_index;
      for (let i = actual_counter; i < expectedWords.length; i++) {
        console.log(
          "INTO I LOOP " + expectedWords[i] + " INTO j LOOP " + data_array[i]
        );
        // if(data_array[actual_counter] != undefined){
        var temm = data_array[j].trim();
        var semm = expectedWords[i].trim();
        if (semm === temm) {
          console.log("IF " + expectedWords[i] + " === " + data_array[j]);
          sting += i + " ";
          console.log("ADDING TO STING ROM ELSE " + i);
          // found.expectedWords[i] = i;
          // latest_index = i;
          latest_index++;
          found[`${expectedWords[i]}`] = `${i}`;
          // console.log("ACTUAL -> " + actual_counter );
          break;
          // actual_counter++;
        } else {
          // console.log("NOT FOUND-> " + data_array[j]);
        }
      }
    }
  }
  const spansStartingWithW = document.querySelectorAll('[id^="w"]');
  // // Change the text color to red for all selected spans
  var redcount = 0;
  spansStartingWithW.forEach((span) => {
    span.style.color = "red";
    // console.log(span);
    redcount++;
  });
  console.log("red", redcount);
  console.log("STING-> " + sting);
  const correct_words = sting.split(/\s+/);
  console.log("CORRECT STRING-> " + correct_words);
  var greenWordCount = 0;
  for (let index = 0; index < correct_words.length; index++) {
    var current_id = correct_words[index];
    var currentElement = document.getElementById("w" + current_id);
    if (currentElement) {
      currentElement.style.color = "green";
      greenWordCount++;
    }

    // to count error
    var mistakeCount = redcount - greenWordCount;
    // console.log("eroor_c" , mistakeCount)
    // console.log("greenWordCount++",greenWordCount)
    mistakesSpan.textContent = mistakeCount;
  }
  console.log("greenWordCount", greenWordCount);

  accuracyCount = (greenWordCount * 100) / typedWordCount;
  accuracyCount = accuracyCount.toFixed(1);
  accuracySpan.innerText = accuracyCount + "%";
  // console.log(total_words,"lengthCount")

  // console.log("kmkn", accuracyCount);

  // console.log("geree ", greenWordCount);
  stopTimer();
}

//   -------------------------------------------------------------------------------------

// FUNCTION TO RENDER NEW QUOTE to display
const renderNewQuote = (type_language) => {
  UserInput.value = ""; //to clear textarea
  if (type_language === "marathi") {
    const randomIndex = Math.floor(
      Math.random() * sentencesArrayMarathi.length
    );
    textToType = sentencesArrayMarathi[randomIndex];
  } else if (type_language === "hindi") {
    const randomIndex = Math.floor(Math.random() * sentencesArrayHindi.length);
    textToType = sentencesArrayHindi[randomIndex];
  } else {
    const randomIndex = Math.floor(
      Math.random() * sentencesArrayEnglish.length
    );
    textToType = sentencesArrayEnglish[randomIndex];
    UserInput.disabled = false;
  }
  // console.log(textToType);
  const seperator_word = textToType.split(/\s+/);
  // const seperator_word = splitWords(seperator_wor);

  console.log("psaas", seperator_word);

  // Iterate through the words and create <span> elements
  var span_id = 0;
  for (const word of seperator_word) {
    const spanElement = document.createElement("span");
    spanElement.textContent = word + " "; // Add a space after each word
    spanElement.id = "w" + span_id;
    result.appendChild(spanElement);
    span_id++;
  }
  // result.innerHTML = textToType;
};

var tracker = 0;   
    var trac = 0;
    const strr = "";
    var initial = -1;
function convertToMarathi(englishText) {
    console.log("EnglishTextReal=> " + EnglishTextReal)
    // console.log("englishText=> " + englishText)
    // typedWordCount = UserInput.value.split(" ").length;
//   console.log("ebgtext",englishText.split(" ").length);
  const remingtonMapping = {
    q: "ु",
    w: "ू",
    e: "म",
    r: "त",
    t: "ज",
    y: "ल",
    u: "न",
    i: "प",
    o: "व",
    p: "च",
    a: "ं",
    s: "े",
    d: "क",
    f: "ि",
    g: "ह",
    h: "ी",
    j: "र",
    k: "ा",
    l: "स",
    z: "्र",
    x: "ग",
    c: "ब",
    v: "अ",
    b: "इ",
    n: "द",
    m: "उ",
    "~": "द्य",
    "`": "़",
    1: "१",
    2: "२",
    3: "३",
    4: "४",
    5: "५",
    6: "६",
    7: "७",
    8: "८",
    9: "९",
    0: "०",
    "-": "ञ",
    _: ".",
    "=": "ृ",
    "\\": ".",
    "[": "ख्",
    "]": ",",
    ";": "य",
    "?": "घ्‍",
    ",": "ए",
    ".": "ण्",
    "/": "ध्",
    Q: "फ",
    W: "ॅ",
    E: "म्",
    R: "त्",
    T: "ज्",
    Y: "ल्",
    U: "न्",
    I: "प्",
    O: "व्",
    P: "च्",
    A: "ा",
    S: "ै",
    D: "क्",
    F: "थ्",
    G: "ळ",
    H: "भ्",
    J: "श्र",
    K: "ज्ञ",
    L: "स्",
    Z: "र्",
    X: "ग्",
    C: "ब्",
    V: "ट",
    B: "ठ",
    N: "छ",
    M: "ड",
    "`": "़",
    "!": "|",
    "@": "/",
    "#": ":",
    $: "ऱ्‍",
    "%": "-",
    "^": "“",
    "&": "‘",
    "*": "द्ध",
    "(": "त्र",
    ")": "ऋ",
    "+": "्",
    "|": "\\",
    "{": "क्ष्",
    "}": "द्व",
    ":": "रू",
    '"': "ष्",
    "<": "ढ",
    ">": "झ",
    "?": "घ्",
    '"': "ष्",
    "'": "श्‍",
  };

  const half_letter = {
    H: "भ",
    E: "म",
    R: "त",
    T: "ज",
    Y: "ल",
    U: "न",
    I: "प",
    O: "व",
    P: "च",

    "[": "ख",
    "{": "क्ष",
    D: "क",
    F: "थ",
    L: "स",
    '"': "ष",
    "'": "श",
    X: "ग",
    C: "ब",
    v: "आ",
    ".": "ण",
    "?": "घ",
    "/": "ध",
  };

  const half_letter_rafar = {
    F: "र्थ",
    H: "र्भ",
    '"': "र्ष ",
    "'": "र्श ",
    ".": "र्ण",
    "?": "र्घ",
    "/": "र्ध",
    "{": "र्क्ष",
    "[": "र्ख ",
  };

  const half_letter_rafar_keys = Object.keys(half_letter_rafar);
  // con
  const half_letter_keys = Object.keys(half_letter);
  const a = [];
  const main_a = [];
  let z = 0;

  const EnglishWords = EnglishTextReal.split(" ");
    //KEEP TRACT OF 3 WORDS
    var wordlength =  englishText.split(" ").length   ;
    console.log("REAL SPLIT-> " + EnglishWords + " Length-> "+ EnglishWords.length)
    var counterr = EnglishWords.length - 1;
    for (let i = counterr; i < EnglishWords.length; i++) {
        console.log("MAIN LOOP FOR " + i )
        for(let j = 0; j < EnglishWords[i].length; j++){

            a[j] = remingtonMapping[EnglishWords[i][j]] || EnglishWords[i][j];
            // FIRST FOR ENDS
        }  
        console.log("JOINER FOR " + i + "-> " + a.join(""))
        // main_a.push(a.join(""))
        // strr += a.join("")
        // // SECOND FOR ENDS

        // console.log("MAIN ARRAY-> " + strr)
    }


//   for (let i = trac; i < EnglishTextReal.length; i++) {
//     // console.log("LOOP KRAMANK-> " + i + " -> " + a);
//     // console.log("(EnglishTextReal", EnglishTextReal);

//     // for half letter and full letter rafar and kana with half letter for र्भा , र्भ .
//     if (
//       EnglishTextReal[i - 1] == "k" &&
//       EnglishTextReal[i] == "Z" &&
//       EnglishTextReal[i - 2] != " " &&
//       EnglishTextReal[i - 2] != undefined
//     ) {
//       if (half_letter_keys.includes(EnglishTextReal[i - 2])) {
//         console.log("a[i] first ", a[i]);
//         if (EnglishTextReal[i - 3] == "f") {
//           console.log("a[i]", a[i]);
//           pos3 = half_letter_keys.indexOf(EnglishTextReal[i - 2]);
//           a[i - 3] =
//             remingtonMapping[EnglishTextReal[i]] +
//             half_letter[half_letter_keys[pos3]] +
//             remingtonMapping[EnglishTextReal[i - 3]];
//           console.log("for र्भि like letters ", a[i - 3]);
//           i++;
//         } else {
//           const position1 = half_letter_keys.indexOf(EnglishTextReal[i - 2]);
//           a[i - 2] =
//             remingtonMapping[EnglishTextReal[i]] +
//             half_letter[half_letter_keys[position1]];
//           console.log("BOOO " + a[i - 2], "><><><><", a[i - 3]);
//           i++;
//         }
//       } else if (
//         half_letter_keys.includes(EnglishTextReal[i - 3]) &&
//         EnglishTextReal[i - 1] == "k" &&
//         EnglishTextReal[i - 2] == "k"
//       ) {
//         const position2 = half_letter_keys.indexOf(EnglishTextReal[i - 3]);
//         a[i - 3] =
//           remingtonMapping[EnglishTextReal[i]] +
//           half_letter[half_letter_keys[position2]];
//         console.log("o", a[i - 3]);
//         i++;
//       } else if (
//         half_letter_keys.includes(EnglishTextReal[i - 3]) &&
//         EnglishTextReal[i - 1] == "k"
//       ) {
//         // H ; k Z \\ H ; Z
//         a[i - 3] =
//           remingtonMapping[EnglishTextReal[i]] +
//           remingtonMapping[EnglishTextReal[i - 3]];
//         i++;
//       } else {
//         a[i - 2] =
//           remingtonMapping[EnglishTextReal[i]] +
//           remingtonMapping[EnglishTextReal[i - 2]];
//         console.log("in rafar with kana", a[i - 2]);
//         i++;
//       }
//     }

//     // for rafar with pahili velanti
//     if (
//       EnglishTextReal[i - 2] == "f" &&
//       EnglishTextReal[i] == "Z" &&
//       EnglishTextReal[i - 1] != " " &&
//       EnglishTextReal[i - 1] != undefined
//     ) {
//       a[i - 2] =
//         remingtonMapping[EnglishTextReal[i]] +
//         remingtonMapping[EnglishTextReal[i - 1]] +
//         remingtonMapping[EnglishTextReal[i - 2]];

//       console.log("in rafar with pahili velanti (र्वि)", a[i - 2]);
//       i++;
//     }
//     // "for letters like (प्रि)"
//     if (
//       EnglishTextReal[i - 2] == "f" &&
//       EnglishTextReal[i] == "z" &&
//       EnglishTextReal[i - 1] != " " &&
//       EnglishTextReal[i - 1] != undefined
//     ) {
//       a[i - 2] =
//         remingtonMapping[EnglishTextReal[i - 1]] +
//         remingtonMapping[EnglishTextReal[i]] +
//         remingtonMapping[EnglishTextReal[i - 2]];

//       console.log("for letters like (प्रि)", a[i - 2]);
//       i++;
//     }

//     //  for rafar with dusri velanti
//     if (
//       EnglishTextReal[i - 1] == "h" &&
//       EnglishTextReal[i] == "Z" &&
//       EnglishTextReal[i - 2] != " " &&
//       EnglishTextReal[i - 2] != undefined
//     ) {
//       // for half letter rafar and velanti
//       if (
//         EnglishTextReal[i - 2] == "k" &&
//         half_letter_keys.includes(EnglishTextReal[i - 3])
//       ) {
//         const pos1 = half_letter_keys.indexOf(EnglishTextReal[i - 3]);
//         a[i - 3] =
//           remingtonMapping[EnglishTextReal[i]] +
//           half_letter[half_letter_keys[pos1]];
//         i++;
//       }
//       // for full letter rafar and velanti
//       else {
//         a[i - 2] =
//           remingtonMapping[EnglishTextReal[i]] +
//           remingtonMapping[EnglishTextReal[i - 2]];
//         console.log("in rafar with  dusri velanti", a[i - 2]);
//         i++;
//       }
//     }

//     // for velanti of half lettr velanti
//     if (
//       EnglishTextReal[i] != "" &&
//       EnglishTextReal[i] != "k" &&
//       half_letter_keys.includes(EnglishTextReal[i - 1]) &&
//       EnglishTextReal[i - 2] === "f"
//     ) {
//       var joiner =
//         remingtonMapping[EnglishTextReal[i - 1]] +
//         remingtonMapping[EnglishTextReal[i]] +
//         remingtonMapping[EnglishTextReal[i - 2]];
//       a[i - 2] = joiner;
//       console.log("hurrey NAVIN " + joiner);
//       i++;
//     }

//     // for world like "स्थि"
//     if (
//       EnglishTextReal[i] == "k" &&
//       half_letter_keys.includes(EnglishTextReal[i - 2]) &&
//       half_letter_keys.includes(EnglishTextReal[i - 1]) &&
//       EnglishTextReal[i - 3] === "f"
//     ) {
//       const pos2 = half_letter_keys.indexOf(EnglishTextReal[i - 2]);
//       const pos4 = half_letter_keys.indexOf(EnglishTextReal[i - 1]);
//       a[i - 3] =
//         remingtonMapping[EnglishTextReal[i - 2]] +
//         half_letter[half_letter_keys[pos4]] +
//         remingtonMapping[EnglishTextReal[i - 3]];
//       console.log("for two half letter with pahili velanti ", a[i - 3]);
//     }

//     // for थ्रि
//     else if (
//       half_letter_keys.includes(EnglishTextReal[i - 2]) &&
//       EnglishTextReal[i - 3] == "f" &&
//       EnglishTextReal[i - 1] == "k" &&
//       EnglishTextReal[i] == "z"
//     ) {
//       const pos5 = half_letter_keys.indexOf(EnglishTextReal[i - 2]);
//       a[i - 3] =
//         half_letter[half_letter_keys[pos5]] +
//         remingtonMapping[EnglishTextReal[i]] +
//         remingtonMapping[EnglishTextReal[i - 3]];
//       console.log("for थ्रि ", a[i - 3]);
//     }

//     // for words like र्हे and र्धे
//     else if (
//       EnglishTextReal[i] == "Z" &&
//       EnglishTextReal[i - 1] == "s" &&
//       EnglishTextReal[i - 2] != " " &&
//       EnglishTextReal[i - 2] != undefined
//     ) {
//       // for words like र्धे (half letter vale )
//       if (
//         half_letter_keys.includes(EnglishTextReal[i - 3]) &&
//         EnglishTextReal[i - 2] == "k"
//       ) {
//         const pos6 = half_letter_keys.indexOf(EnglishTextReal[i - 3]);
//         a[i - 3] =
//           remingtonMapping[EnglishTextReal[i]] +
//           half_letter[half_letter_keys[pos6]];
//         console.log(" for words like र्धे", a[i - 3]);
//       }
//       // for words like र्हे
//       else {
//         a[i - 2] =
//           remingtonMapping[EnglishTextReal[i]] +
//           remingtonMapping[EnglishTextReal[i - 2]];
//         console.log("for words like र्हे ", a[i - 2]);
//       }
//     }

//     // else if (
//     //   EnglishTextReal[i] == "Z" &&
//     //   EnglishTextReal[i - 1] == "s" &&
//     //   half_letter_keys.includes(EnglishTextReal[i - 3]) &&
//     //   EnglishTextReal[i - 2] == "k"
//     // ) {

//     // }

//     // FOR PAHILE VELANTI
//     else if (
//       EnglishTextReal[i] === "k" &&
//       half_letter_keys.includes(EnglishTextReal[i - 1]) &&
//       EnglishTextReal[i - 2] === "f"
//     ) {
//       const position = half_letter_keys.indexOf(EnglishTextReal[i - 1]);
//       var temp =
//         half_letter[half_letter_keys[position]] +
//         remingtonMapping[EnglishTextReal[i - 2]];
//       a[i - 2] = temp;
//       console.log("hurrey" + temp);
//       // i++
//     } else if (
//       EnglishTextReal[i] == "f" &&
//       EnglishTextReal[i + 1] != " " &&
//       remingtonMapping[EnglishTextReal[i + 1]] != undefined
//     ) {
//       a[i] =
//         remingtonMapping[EnglishTextReal[i + 1]] +
//         remingtonMapping[EnglishTextReal[i]];
//       i++;
//       console.log("PRIMARY IF");
//     }
//     //FOR half letter and kana and AA
//     else if (
//       half_letter_keys.includes(EnglishTextReal[i]) &&
//       (EnglishTextReal[i + 1] == "k" || EnglishTextReal[i + 1] == "A")
//     ) {
//       console.log("in 2nd if");
//       const position = half_letter_keys.indexOf(EnglishTextReal[i]);
//       a[i] = "";
//       a[i] = half_letter[half_letter_keys[position]];
//       console.log("SECONDARY IF  for AA ", a[i]);
//       i++;
//     }
//     // for "ओ"
//     else if (
//       EnglishTextReal[i - 2] == "v" &&
//       EnglishTextReal[i - 1] == "k" &&
//       EnglishTextReal[i] == "s"
//     ) {
//       a[i - 2] = "ओ";
//       console.log("in ओ");
//     }

//     // for "औ"
//     else if (
//       EnglishTextReal[i - 2] == "v" &&
//       EnglishTextReal[i - 1] == "k" &&
//       EnglishTextReal[i] == "S"
//     ) {
//       a[i - 2] = "औ";
//       console.log("in औ");
//     }

//     // for ॲ
//     else if (EnglishTextReal[i - 1] == "v" && EnglishTextReal[i] == "W") {
//       a[i - 1] = "ॲ";
//     }

//     // for ऑ
//     else if (
//       EnglishTextReal[i - 2] == "v" &&
//       EnglishTextReal[i - 1] == "k" &&
//       EnglishTextReal[i] == "W"
//     ) {
//       a[i - 2] = "ऑ";
//     }

//     // for ऐ
//     else if (EnglishTextReal[i - 1] == "," && EnglishTextReal[i] == "s") {
//       a[i - 1] = "ऐ";
//     }

//     // for ऊ
//     else if (EnglishTextReal[i] == "m" && EnglishTextReal[i + 1] == "Q") {
//       // initialize only for ऊ
//       console.log("in ऊ");
//       a[i] = "ऊ";
//       i++;
//     }
//     //   for rafar of jodshabda and purna shbda rafar
//     else if (
//       EnglishTextReal[i] == "Z" &&
//       EnglishTextReal[i - 1] != " " &&
//       remingtonMapping[EnglishTextReal[i - 1]] != undefined
//     ) {
//       // for jodshabda
//       if (half_letter_keys.includes(EnglishTextReal[i - 2])) {
//         console.log("in jeeee ", EnglishTextReal[i - 2]);
//         console.log(
//           "for if wala rafar ",
//           EnglishTextReal[i],
//           EnglishTextReal[i - 1],
//           EnglishTextReal[i - 2]
//         );
//         console.log(
//           remingtonMapping[EnglishTextReal[i]],
//           remingtonMapping[EnglishTextReal[i - 1]],
//           remingtonMapping[EnglishTextReal[i - 2]]
//         );
//         a[i - 2] =
//           remingtonMapping[EnglishTextReal[i]] +
//           remingtonMapping[EnglishTextReal[i - 2]];
//       } else {
//         // for sadha rafar
//         console.log("in else");
//         a[i - 1] =
//           remingtonMapping[EnglishTextReal[i]] +
//           remingtonMapping[EnglishTextReal[i - 1]];
//         console.log(EnglishTextReal[i], EnglishTextReal[i - 1]);
//       }
//       console.log("in rafar");
//     } else if (
//       // in big rafar
//       EnglishTextReal[i] == "Z" &&
//       EnglishTextReal[i - 1] == "k" &&
//       remingtonMapping[EnglishTextReal[i - 1]] != undefined
//     ) {
//       a[i] =
//         remingtonMapping[EnglishTextReal[i]] +
//         remingtonMapping[EnglishTextReal[i - 1]];
//     }

//     // for big "E"
//     else if (EnglishTextReal[i] == "b" && EnglishTextReal[i + 1] == "Z") {
//       a[i] = "ई";
//       console.log("in ई ");
//       i++;
//     }
//     //FOR NORMAL
//     else {
//       console.log("in sadha loop");
//       a[i] = remingtonMapping[EnglishTextReal[i]] || EnglishTextReal[i];
//     }

//     // FOR LOOP ENDS
//     // tracker++;
    
//     // if(wordlength === 2 ){
//     //     console.log("2 word length-> " + EnglishTextReal.length);
//     // }

//     if (wordlength % 3 === 0 && wordlength !== 0) {
//         tracker = EnglishTextReal.length;
//         console.log("asdasdasd " + EnglishTextReal.length);    
//     }else{
//         trac = tracker;
//         console.log("Loop Will Strat from-> " + trac);
//         console.log("CUrrent Tracker " + a.join(""));
//     }

//     // console.log("A["+i+"]-> " + a[i]);
//   }
//   var joinn = a.join("");
//   console.log(joinn)

//   return a.join("");
}
